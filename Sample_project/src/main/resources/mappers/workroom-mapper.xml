<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.dp.ggomjirak.workroom">
		
	<!-- 취미목록 -->
	<select id="listHobby" resultType="HobbyVo">
		select * from(select rownum rnum, a.* from 
		    (select * from tbl_hobby 
		    order by hobby_no desc)a)
		where rnum between #{startRow} and #{endRow}
		and hobby_writer = #{hobby_writer}
	</select>
	
	<!-- 취미 총 갯수 -->
	<select id="hobbyCount" resultType="int">
		select count(*) from tbl_hobby
		where hobby_writer = #{hobby_writer}
	</select>
	
	<!-- 프로필카드 -->
	<select id="getMemInfo" resultType="MemberVo">
		select md.*, mg.name
			from tbl_memberdetail md, tbl_membergrade mg
			where md.user_grade = mg.cd
			and md.user_id = #{user_id}
	</select>
	
	<!-- 검색 -->
	<select id="searchHobby" resultType="HobbyVo">
		select * from tbl_hobby
		where hobby_title like '%' || #{keyword} || '%'
		and hobby_writer = #{hobby_writer}
		order by hobby_no desc
	</select>
	
	<select id="searchStory" resultType="StoryVo">
		select * from tbl_story
		where st_content like '%'|| #{keyword} || '%'
		and user_id = #{user_id}
		order by st_no desc
	</select>
	
		
</mapper>







